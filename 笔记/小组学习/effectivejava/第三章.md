[TOC]

## 使类和成员的可访问性最小

- 尽可能使每个类或成员不被外界访问

  1、对于顶层的类（非嵌套）或者接口，只有两种可能的访问级别：包级私有的和公有的

  2、如果一个包级私有的顶层类（或接口）只是在某一个类的内部被使用到，就应该考虑使它成为唯一使用它的那个类的私有嵌套类

  3、对于成员（域、方法、嵌套类、嵌套接口）有四种访问级别

  > 1. 私有的（private）
  > 2. 包级私有的（ppackage-private）
  > 3. 受保护的（protected）
  > 4. 公有的（public）

  4、公有类的实例域绝不能是公有的，包含公有可变域的类通常是线程不安全的

  5、让类具有公有的静态final数组，或者返回这种域的方法是错误的

  > 解决办法：
  >
  > <img src="/Users/souche/Library/Application Support/typora-user-images/image-20200415165539900.png" alt="image-20200415165539900" style="zoom:50%;" />



## 要在公有类而非公有域中使用访问方法

- 如果类可以在它所在的包之外进行访问，就提供访问方法
- 如果类是包级私有的，或者是私有的嵌套类，直接爆露它的数据域并没有本质的错误



## 使可变性最小化

不可变类：指实例不能被修改的实例。每个实例包含的信息必须在创建的时候就提供，并在对象的整个生命周期内固定不变。

```
BigInteger   BigDecimal
```

> 不可变类遵循的五条规则：
>
> 1. 不要提供任何修改对象的方法
> 2. 保证类不会扩展
> 3. 声明所有的域都是final
> 4. 声明所有的域都是私有的
> 5. 确保对于任何可变组件的互斥访问

- 不可变对象本质上是线程安全的，它们不要求同步可以被自由地共享
- 不仅可以共享不可变对象，甚至也可以共享它们的内部信息
- 不可变对象为其它对象提供了大量的构件
- 不可变对象真正唯一缺点是，对于每一个不同的值都需要一个单独的对象
- 除非有很好的理由使类成为可变的，否则它就应该是不可变的
- 如果类不能被做成不可变的，仍然应该限制它的可变性
- 除非有令人信服的理由要使域变成是非final的，否则要使每个域都是private final
- 构造器应该创建完全初始化的对象，并建立起所有的约束关系



## 复合优先于继承

- 只有当子类真正是超类的子类型时才适用继承



## 要么设计继承并提供文档说明，要么禁止继承

- 该类必须有文档说明它可覆盖的方法的自用型
- 被继承的类必须以静心挑选的受保护的（protected）方法的形式，提供适当的钩子（hook），一遍进入其内部工作中
- 

